#!/usr/bin/env bash

# Define the custom 404 page path
CUSTOM_404_PATH="/var/www/html/404.html"

# Create the custom 404 page
echo "Ceci n'est pas une page" > $CUSTOM_404_PATH

# Backup the original Nginx config (just in case)
cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak

# Add a custom location block to the config dynamically
sed -i '/location \/ {/a \
    \t# Custom error page configuration\
    \terror_page 404 /404.html; \
    \tlocation = /404.html { \
    \t\troot /var/www/html; \
    \t} \
' /etc/nginx/sites-available/default

# Reload Nginx to apply the changes
sudo nginx -s reload

echo "Custom 404 page configured and Nginx reloaded."
